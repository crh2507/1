<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="UTF-8" />
 <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
 <title>Phone Wallet PWA</title>
 <style>
   body { font-family: sans-serif; padding: 2em; }
   input, button { margin: 0.5em 0; padding: 0.5em; width: 100%; }
   .hidden { display: none; }
 </style>
</head>
<body>
 <h2>ðŸ“² Phone Wallet</h2>
 <div id="auth">
   <input id="phone" placeholder="Enter phone number" />
   <input id="pin" type="password" placeholder="Enter PIN" />
   <button id="register">Register / Login</button>
 </div>

 <div id="wallet" class="hidden">
   <p>Welcome, <span id="user"></span></p>
   <p>Balance: <span id="balance">0</span> tokens</p>
   <input id="recipient" placeholder="Recipient phone number" />
   <input id="amount" type="number" placeholder="Amount to send" />
   <button id="send">Send Tokens</button>
   <p id="status"></p>
 </div>

 <script>
   const users = {}; // Simulated user store
   let currentUser = null;

   document.getElementById('register').onclick = () => {
     const phone = document.getElementById('phone').value;
     const pin = document.getElementById('pin').value;
     if (!phone || !pin) return alert('Enter phone and PIN');

     if (!users[phone]) {
       users[phone] = { pin, balance: 100 }; // Initial balance
     } else if (users[phone].pin !== pin) {
       return alert('Incorrect PIN');
     }

     currentUser = phone;
     document.getElementById('user').textContent = phone;
     document.getElementById('balance').textContent = users[phone].balance;
     document.getElementById('auth').classList.add('hidden');
     document.getElementById('wallet').classList.remove('hidden');
   };

   document.getElementById('send').onclick = () => {
     const recipient = document.getElementById('recipient').value;
     const amount = parseInt(document.getElementById('amount').value);
     const sender = users[currentUser];

     if (!recipient || !amount || amount <= 0) return alert('Enter valid recipient and amount');
     if (sender.balance < amount) return alert('Insufficient balance');

     if (!users[recipient]) users[recipient] = { pin: '0000', balance: 0 }; // Auto-create
     sender.balance -= amount;
     users[recipient].balance += amount;

     document.getElementById('balance').textContent = sender.balance;
     document.getElementById('status').textContent = `âœ… Sent ${amount} tokens to ${recipient}`;
   };
 </script>
</body>
</html>
